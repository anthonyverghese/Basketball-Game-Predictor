<!DOCTYPE html>

<!--The goal of this website is to display graphs of various statistics of two teams and determine who will win in their upcoming matchup-->
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Starter Template - Materialize</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>	
</head>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-animate.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="displayingPointsChart.js"></script>
<script src="pointsChart.js"></script>
<script src="blocksChart.js"></script>
<script src="threePointersChart.js"></script>
<script src="js/navigateSlowly.js"></script>
<script src="js/functions.js"></script>
<link rel = "stylesheet"
   type = "text/css"
   href = "css/anthonyStyle.css" />
 <link rel = "stylesheet" type="text/css" href="css/graphs.css" />

<!--This is the navbar-->
<body ng-app="ngAnimate">
  <div class="navbar-fixed">
    <nav id="navBarColor">
      <div class="nav-wrapper">
         <div class="col s12">
        <a href="#favTeamDiv" class="breadcrumb">Step 1</a>
        <a href="#predictGameDiv" class="breadcrumb">Step 2</a>
        <a href="#chartDiv" class="breadcrumb">Step 3</a>
		<a href="#algorithmDiv" class="breadcrumb">Step 4</a>
      </div>
      </div>
    </nav>
  </div>
  
 <!--Home page-->
    <div class="container">
      <br><br>
      <h1 class="header center titleText">Game Predictor</h1>
      <div class="row center">
        <h5 class="header col s12 light titleText">Steph will no longer be the smartest player on the court, you will!</h5>
		<h5 class="header col s12 light titleText">Click the buttons above to navigate throughout the site</h5>
      </div>
      <br><br>

    </div>
  </div>
<!--This displays the image of your favorite team...kinda like with Fifa-->
<div id="favTeamDiv">
<br><br><br><br><br><br><br><br>
</div>	
<ul class="collection with-header">
<li class="collection-header"><div><h4 class="titleText">Pick your Favorite Team</h4></div></li>
        <a href="#!" class="collection-item active activeText" ng-click="atlanticTeams=!atlanticTeams">Atlantic Division</a>
		<div class="collection" ng-show="atlanticTeams">
		<a onclick="changeColor('celtics')" ng-hide="myFavCeltics" ng-click="myFavCeltics=true;" class="collection-item">Celtics</a>
		<a onclick="changeColor('nets')" ng-hide="myFavNets" ng-click="myFavNets=true;" class="collection-item" background-color="green">Nets</a>
		<a onclick="changeColor('knicks')" ng-hide="myFavKnicks" ng-click="myFavKnicks=true;" class="collection-item">Knicks</a>
		<a onclick="changeColor('sixers')" ng-hide="myFavSixers" ng-click="myFavSixers=true;" class="collection-item">76ers</a>
		<a onclick="changeColor('raptors')" ng-hide="myFavRaptors" ng-click="myFavRaptors=true;" class="collection-item">Raptors</a>
	</div>
        <a href="#!" class="collection-item active activeText" ng-click="centralTeams=!centralTeams">Central Division</a>
		<div class="collection" ng-show="centralTeams">
		    <a onclick="changeColor('bulls')" ng-hide="myFavBulls" ng-click="myFavBulls=true;" class="collection-item">Bulls</a>
			<a onclick="changeColor('cavs')" ng-hide="myFavCavs" ng-click="myFavCavs=true;" class="collection-item">Cavs</a>
			<a onclick="changeColor('pistons')" ng-hide="myFavPistons" ng-click="myFavPistons=true;" class="collection-item">Pistons</a>
			<a onclick="changeColor('pacers')" ng-hide="myFavPacers" ng-click="myFavPacers=true;" class="collection-item">Pacers</a>
			<a onclick="changeColor('bucks')" ng-hide="myFavBucks" ng-click="myFavBucks=true;" class="collection-item">Bucks</a>
		</div>
        <a href="#!" class="collection-item active activeText" ng-click="southeastTeams=!southeastTeams">Southeast Division</a>
		<div class="collection" ng-show="southeastTeams">
		   <a onclick="changeColor('hawks')" ng-hide="myFavHawks" ng-click="myFavHawks=true;" class="collection-item">Hawks</a> 
		   <a onclick="changeColor('hornets')" ng-hide="myFavHornets" ng-click="myFavHornets=true;" class="collection-item">Hornets</a> 
		   <a onclick="changeColor('heat')" ng-hide="myFavHeat" ng-click="myFavHeat=true;" class="collection-item">Heat</a> 
		   <a onclick="changeColor('magic')" ng-hide="myFavMagic" ng-click="myFavMagic=true;" class="collection-item">Magic</a> 
		   <a onclick="changeColor('wizards')" ng-hide="myFavWizards" ng-click="myFavWizards=true;" class="collection-item">Wizards</a> 
			
		</div>
		<a href="#!" class="collection-item active activeText" ng-click="northwestTeams=!northwestTeams">Northwest Division</a>
		<div class="collection" ng-show="northwestTeams">
		<a onclick="changeColor('nuggets')" ng-hide="myFavNuggets" ng-click="myFavNuggets=true;" class="collection-item">Nuggets</a> 
		<a onclick="changeColor('timberwolves')" ng-hide="myFavTimberwolves" ng-click="myFavTimberwolves=true;" class="collection-item">Timberwolves</a> 
		<a onclick="changeColor('thunder')" ng-hide="myFavThunder" ng-click="myFavThunder=true;" class="collection-item">Thunder</a>
		<a onclick="changeColor('trailblazers')" ng-hide="myFavTrailblazers" ng-click="myFavTrailblazers=true;" class="collection-item">Trailblazers</a>
		<a onclick="changeColor('jazz')" ng-hide="myFavJazz" ng-click="myFavJazz=true;" class="collection-item">Jazz</a>		
		   
		</div>
		<a href="#!" class="collection-item active activeText" ng-click="pacificTeams=!pacificTeams">Pacific Division</a>
		<div class="collection" ng-show="pacificTeams">
		<a onclick="changeColor('warriors')" ng-hide="myFavWarriors" ng-click="myFavWarriors=true;" class="collection-item">Warriors</a>	
		<a onclick="changeColor('clippers')" ng-hide="myFavClippers" ng-click="myFavClippers=true;" class="collection-item">Clippers</a>	
		<a onclick="changeColor('lakers')" ng-hide="myFavLakers" ng-click="myFavLakers=true;" class="collection-item">Lakers</a>
		<a onclick="changeColor('suns')" ng-hide="myFavSuns" ng-click="myFavSuns=true;" class="collection-item">Suns</a>	
		<a onclick="changeColor('kings')" ng-hide="myFavKings" ng-click="myFavKings=true;" class="collection-item">Kings</a>			
		</div>
		<a href="#!" class="collection-item active activeText" ng-click="southwestTeams=!southwestTeams">Southwest Division</a>
		<div class="collection" ng-show="southwestTeams">
		<a onclick="changeColor('mavs')" ng-hide="myFavMavs" ng-click="myFavMavs=true;" class="collection-item">Mavs</a>
		<a onclick="changeColor('rockets')" ng-hide="myFavRockets" ng-click="myFavRockets=true;" class="collection-item">Rockets</a>
		<a onclick="changeColor('grizzlies')" ng-hide="myFavGrizzlies" ng-click="myFavGrizzlies=true;" class="collection-item">Grizzlies</a>
		<a onclick="changeColor('pelicans')" ng-hide="myFavPelicans" ng-click="myFavGrizzlies=true;" class="collection-item">Pelicans</a>
		</div>
</div>

<!--When a favorite team is clicked, the following divs are shown. The css for showing these images slowly with animation-->
<!--from angular js is found in anthonyStyle.css-->
<div id="favTeamImage">
<div class="celtics" ng-show="myFavCeltics"></div>
<div class="knicks" ng-show="myFavKnicks"></div>
<div class="nets" ng-show="myFavNets"></div>
<div class="sixers" ng-show="myFavSixers"></div>
<div class="raptors" ng-show="myFavRaptors"></div>
<div class="bulls" ng-show="myFavBulls"></div>
<div class="cavs" ng-show="myFavCavs"></div>
<div class="pistons" ng-show="myFavPistons"></div>
<div class="pacers" ng-show="myFavPacers"></div>
<div class="bucks" ng-show="myFavBucks"></div>
<div class="hawks" ng-show="myFavHawks"></div>
<div class="hornets" ng-show="myFavHornets"></div>
<div class="heat" ng-show="myFavHeat"></div>
<div class="magic" ng-show="myFavMagic"></div>
<div class="wizards" ng-show="myFavWizards"></div>
<div class="nuggets" ng-show="myFavNuggets"></div>
<div class="timberwolves" ng-show="myFavTimberwolves"></div>
<div class="thunder" ng-show="myFavThunder"></div>
<div class="trailblazers" ng-show="myFavTrailblazers"></div>
<div class="jazz" ng-show="myFavJazz"></div>
<div class="warriors" ng-show="myFavWarriors"></div>
<div class="clippers" ng-show="myFavClippers"></div>
<div class="lakers" ng-show="myFavLakers"></div>
<div class="suns" ng-show="myFavSuns"></div>
<div class="kings" ng-show="myFavKings"></div>
<div class="mavs" ng-show="myFavMavs"></div>
<div class="rockets" ng-show="myFavRockets"></div>
<div class="grizzlies" ng-show="myFavGrizzlies"></div>
<div class="pelicans" ng-show="myFavPelicans"></div>
</div>

<!--The following is the css for the points scored graph. I kept it here because I have been having issues with displaying the graph-->
<a href="#predictGameDiv" class="waves-effect waves-light btn-large btn2"><i class="material-icons right">play_for_work</i>That was fun, now let's go to the next steps to actually predict some games</a>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<style>
.axis {
            font-size: 13px;
        }
        
        .axis path,
        .axis line {
            fill: none;
            stroke-width: 1px;
            stroke: #000;
            shape-rendering: crispEdges;
        }
        
        .label {
            font-size: 13px;
        }
</style>

<!--The following is the d3 javascript code that displays the grouped bar chart. The points scored in the past four games-->
<!--of the two teams is displayed in this grouped bar chart. This javascript is displaying in this html file because-->
<!--I have been having issues with displaying the graph-->
<div id="graphic"></div>
<script>
	<!--Should dynamically generate colors based on team's colors-->
        var COLORS = ["#4391b5", "#d2d2d2"],
            LABELS = ["Team1", "Team2"],
            VALUES = ["val0", "val1"],
            CATEGORIES = {
                cat1: "Four Games Ago",
                cat2: "Three Games Ago",
                cat3: "Two Games Ago",
                cat4: "Last Game"
            },
            data;

        function wrap2(text, width, startingx) {
            text.each(function () {
                var text = d3.select(this),
                    words = text.text().split(/\s+/).reverse(),
                    word,
                    line = [],
                    lineNumber = 0,
                    lineHeight = 1.1, // ems
                    y = text.attr("y"),
                    dy = lineHeight * 1.2
                    //dy = parseFloat(text.attr("dy")),
                tspan = text.text(null).append("tspan").attr("x", startingx).attr("y", y).attr("dy", dy + "em");
                while (word = words.pop()) {
                    line.push(word);
                    tspan.text(line.join(" "));
                    if (tspan.node().getComputedTextLength() > width) {
                        line.pop();
                        tspan.text(line.join(" "));
                        line = [word];
                        tspan = text.append("tspan").attr("x", startingx).attr("y", y).attr("dy", ++lineNumber * lineHeight + dy + "em").text(word);
                    }
                }
            });
        }

        function groupedChart() {
            var color = d3.scale.ordinal()
                .range(COLORS);

            var margin = {
                top: 70,
                right: 40,
                bottom: 45,
                left: 100
            };

            var width = 960 - margin.left - margin.right,
                height = 500 - margin.top - margin.bottom;
			
			console.log("log1");
            var svg = d3.select("#graphic").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            var legspacing = 25;
			console.log("log2");
            var legend = svg.selectAll(".legend")
                .data(VALUES)
                .enter()
                .append("g")
			console.log("log3");
			
            legend.append("rect")
                .attr("fill", color)
                .attr("width", 20)
                .attr("height", 20)
                .attr("y", function (d, i) {
                    return i * legspacing - 60;
                })
                .attr("x", 0);
			console.log("log4");
			
            legend.append("text")
                .attr("class", "label")
                .attr("y", function (d, i) {
                    return i * legspacing - 46;
                })
                .attr("x", 30)
                .attr("text-anchor", "start")
                .text(function (d, i) {
                    return LABELS[i];
                });


            data.forEach(function (d) {
                d[VALUES[0]] = +d[VALUES[0]];
                d[VALUES[1]] = +d[VALUES[1]];
                d.vals = VALUES.map(function (name) {
                    return {
                        name: name,
                        value: +d[name]
                    };
                });
            });

            var y0 = d3.scale.ordinal()
                .rangeRoundBands([height, 0], .14);

            var y1 = d3.scale.ordinal();

            var x = d3.scale.linear()
                .range([0, width])
                .domain([0, d3.max(
    [].concat(data.map(function (d) {
                        return (d[VALUES[0]]);
                    }), data.map(function (d) {
                        return (d[VALUES[1]]);
                    })))]);
			console.log("log5");
            y0.domain(data.map(function (d) {
                return d.category;
            }));

            y1.domain(VALUES).rangeRoundBands([0, y0.rangeBand()]);

            x.domain([0, d3.max(data, function (d) {
                return d3.max(d.vals, function (d) {
                    return d.value;
                });
            })]);

            var yAxis = d3.svg.axis()
                .scale(y0)
                .tickSize(0)
                .tickFormat(function (d) {
                    return CATEGORIES[d];
                })
                .orient("left");

            var gy = svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
                .selectAll(".tick text")
                .attr("transform", function (d) {
                    return "translate(0," + -0.25 * y0.rangeBand() + ")";
                })
                .call(wrap2, 90, -5);


            var bars = svg.selectAll(".bar")
                .data(data)
                .enter().append("g")
                .attr("class", "group")
                .attr("transform", function (d) {
                    return "translate(0," + y0(d.category) + ")";
                });

            bars.selectAll("rect")
                .data(function (d) {
					console.log(d.vals);
					console.log(typeof(d.vals));
                    return d.vals;
                })
                .enter().append("rect")
                .attr("height", y1.rangeBand())
                .attr("y", function (d) {
                    return y1(d.name);
                })
                .attr("x", x(0))
                .attr("width", function (d) {
                    return x(d.value);
                })
                .attr("fill", function (d) {
                    return color(d.name);
                });

            bars.selectAll("text")
                .data(function (d) {
                    return d.vals;
                })
                .enter().append("text")
                .attr("class", "label")
                .attr("y", function (d) {
                    return y1(d.name) + y1.rangeBand() / 2 + 4;
                })
                .attr("x", function (d) {
                    return x(d.value) + 6;
                })
                .attr("text-anchor", "start")
                .text(function (d) {
                    return d.value;
                });
				console.log("log6");
        }
        d3.csv("data1.csv", function (rates) {
            data = rates;
            groupedChart();
        })
		
    </script>
	
<!--User should have the choice of predicting a game. We should dynamically generate the list of games coming up. As of right now,-->
<!--I am just including three default upcoming games-->
<div id="predictGameDiv">
<br><br>
 <ul class="collection with-header">
        <li class="collection-header"><h4 class="titleText">Upcoming Games</h4></li>
        <a  class="collection-item titleText">Cavs vs. Warriors</a>
        <a  class="collection-item titleText">Knicks vs. Raptors</a>
        <a  class="collection-item titleText">Celtics vs. Wizards</a>
      </div>
</div>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

<!--Charts were displayed here. NOT ANYMORE though! I might revert back to this with the old graphs I used, though, so I am keeping it-->
<div id="chartDiv">
<br><br><br><br><br><br><br><br><br>
</div>
<div class="col s12 m4" id="chart_div"></div>

<!--When this button is clicked, it calls the function myFunction1(), from pointsChart.js, which displays the points graph-->
<button class = "dropbtn btn2" type="button"onclick="myFunction1()">Compare Points!</button>
<!--When this button is clicked, it calls the function myFunction2(), from blocksChart.js, which displays the blocks graph-->
<button class = "dropbtn btn2" type="button" onclick="myFunction2()">Compare Blocks!</button>
<!--When this button is clicked, it calls the function myFunction3(), from threePointersChart.js, which displays the three-pointers graph-->
<button class = "dropbtn btn2" type="button" onclick="myFunction3()">Compare Three-pointers!</button>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<!--We should create the algorithm in javascript and then return the predicted winner here-->
<div ng-init="mySwitch=false">
<p>
<div id="algorithmDiv">
<br><br><br><br><br><br><br><br><br><br><br><br>
</div>
<button id="button" class = "dropbtn btn2" ng-click="mySwitch=true">Click Me to display what the algorithm determined!</button>
<div ng-show="mySwitch">
<p class="titleText">And the winner is....the Wizards!</p>
</div>
</div>
</p>
</div>
<br><br><br><br><br><br><br><br><br><br><br><br>
  <div class="container">
    <div class="section">

      <!--   Icon Section   -->
      <div class="row">
        <div class="col s12 m4">
          <div class="icon-block">
            <h2 class="center light-blue-text"><i class="material-icons titleText">flash_on</i></h2>
            <h5 class="center">Fast Predictions</h5>

            <p class="light">Quickly use our algorithm to determine who will win the next big game. Your friends will be impressed by your success game after game.</p>
          </div>
        </div>

        <div class="col s12 m4">
          <div class="icon-block">
            <h2 class="center light-blue-text"><i class="material-icons titleText">assessment</i></h2>
            <h5 class="center">Analysis</h5>

            <p class="light">We care about how you traverse through the site, so we made sure that you are able to analyze information with charts rather than just numbers.</p>
          </div>
        </div>

        <div class="col s12 m4">
          <div class="icon-block">
            <h2 class="center light-blue-text"><i class="material-icons titleText">thumb_up</i></h2>
            <h5 class="center">Easy to use</h5>

            <p class="light">Our site's relatively simple user interface makes it very easy to better understand the dynamics of NBA teams and how certain statistics serve as very strong predictors.</p>
          </div>
        </div>
      </div>

    </div>
    <br><br>
  </div>

  <footer class="page-footer" id="footerColor">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Company Bio</h5>
          <p class="grey-text text-lighten-4">We are a team of college students working on this project like it's our full time job. Any amount would help support and continue development on this project and is greatly appreciated.</p>


        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Settings</h5>
          <ul>
            <li><a class="white-text">Link 1</a></li>
            <li><a class="white-text">Link 2</a></li>
            <li><a class="white-text">Link 3</a></li>
            <li><a class="white-text">Link 4</a></li>
          </ul>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Connect</h5>
          <ul>
            <li><a class="white-text">Link 1</a></li>
            <li><a class="white-text">Link 2</a></li>
            <li><a class="white-text">Link 3</a></li>
            <li><a class="white-text">Link 4</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      Made by <a class="orange-text text-lighten-3" href="http://materializecss.com">Materialize</a>
      </div>
    </div>
  </footer>


  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

  </body>
</html>
